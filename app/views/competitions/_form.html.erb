<%= simple_form_for(@competition) do |f| %>

<div class="row" >
	<div class="col-md-3">
		<div class="form-group <%= "has-error" if @competition.errors[:title].any? %>">
			<%= f.input :title, required: false, error: false,  input_html: { class: 'form-control' }, label_html: { class: 'control-label' } %>
			<% if @competition.errors[:title].any? %>
			<span class="help-block"><%= @competition.errors.full_messages_for(:title).first %></span>
			<% end %>
		</div>
	</div>
</div>
<div class="row" >
	<div class="col-md-3">
		<%= render :partial => 'fields/date', :locals => { f: f, model: @competition, attr: :start_date } %>
	</div>
	<div class="col-md-3">
		<%= render :partial => 'fields/date', :locals => { f: f, model: @competition, attr: :end_date } %>
	</div>
</div>

<div class="row" >
	<div class="col-md-3">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title"> <%= f.label :venue %>
				<div class="pull-right">
					<% if policy(Venue.new).new? %>
					<%= link_to raw("<span class='glyphicon glyphicon-plus green'></span>"), new_venue_path, remote: true, id: "venue" %>
					<% end %>
					<% if policy(Venue.new).edit? %>
					<%= link_to raw("<span class='glyphicon glyphicon-pencil yellow'></span>"), edit_venue_path(1), class: "hidden venue-edit", remote: true %>
					<% end %>
				</div></h3>
			</div>
			<div class="panel-body">
				<div class="form-group <%= "has-error" if @competition.errors[:venue_id].any? %>">
					<%= f.association :venue,  input_html: { class: 'form-control' }, label: false, error: false %>
					<% if @competition.errors[:venue_id].any? %>
					<span class="help-block"><%= @competition.errors.full_messages_for(:venue_id).first %></span>
					<% end %>
				</div>
			</div>
		</div>
	</div>
</div>

<div class="row" >
	<div class="col-md-3">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title"> <%= f.label :competition_template %>
				<div class="pull-right">
					<% if policy(CompetitionTemplate.new).new? %>
					<%= link_to raw("<span class='glyphicon glyphicon-plus green'></span>"), new_competition_template_path, remote: true, id: "competition" %>
					<% end %>
					<% if policy(CompetitionTemplate.new).edit? %>
					<%= link_to raw("<span class='glyphicon glyphicon-pencil yellow'></span>"), edit_competition_template_path(1), class: "hidden competition_template-edit", remote: true %>
					<% end %>
				</div></h3>
			</div>
			<div class="panel-body">
				<div class="form-group <%= "has-error" if @competition.errors[:competition_template_id].any? %>">
					<%= f.association :competition_template,  input_html: { class: 'form-control' }, label: false, error: false %>
					<% if @competition.errors[:competition_template_id].any? %>
					<span class="help-block"><%= @competition.errors.full_messages_for(:competition_template_id).first %></span>
					<% end %>
				</div>
			</div>
		</div>
	</div>
</div>

<%= f.submit :class => 'btn btn-success' %>

<% end %>

<div id="venue-modal" class="modal fade"></div>

